<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			.box{
				width: 100px;
				height: 100px;
				background: pink;
				position: absolute;
			}
		</style>
	</head>
<body>
	<button>移动到400</button>
	<button>宽度变为400</button>
	<div class="box">
		
	</div>
	<script type="text/javascript">
		var butt1 = document.getElementsByTagName("button")[0];
		var butt2 = document.getElementsByTagName("button")[1];
		var box = document.getElementsByClassName("box")[0];
		
		butt1.onclick = function(){
			animate(box,"left",400);
		}
		butt2.onclick = function(){
			animate(box,"width",400);
		}
		function animate(ele,attr,target){
			clearInterval(ele.timer);
			var finalStyle = ele.currentStyle ? ele.currentStyle : window.getComputedStyle(ele,null);
			ele.timer = setInterval(function(){

//				var leader = finalStyle[attr] ? parseInt(finalStyle[attr]) : 0;
				var leader = parseInt(finalStyle[attr]);
				var val = target - leader;
				
				var speed = val > 0 ? Math.ceil(val/10) : Math.floor(val/10);
				ele.style[attr] = leader + speed + "px";
				if(Math.abs(val) <= Math.abs(speed)){
					clearInterval(ele.timer);
				}
			},20)
		}
		
		
	</script>	
	

</body>
</html>
